(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa3ba0a"],{1276:function(t,e,n){"use strict";var a=n("d784"),i=n("44e7"),s=n("825a"),o=n("1d80"),l=n("4840"),r=n("8aa5"),c=n("50c4"),d=n("14c3"),u=n("9263"),h=n("d039"),p=[].push,g=Math.min,m=4294967295,b=!h((function(){return!RegExp(m,"y")}));a("split",2,(function(t,e,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var a=String(o(this)),s=void 0===n?m:n>>>0;if(0===s)return[];if(void 0===t)return[a];if(!i(t))return e.call(a,t,s);var l,r,c,d=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,b=new RegExp(t.source,h+"g");while(l=u.call(b,a)){if(r=b.lastIndex,r>g&&(d.push(a.slice(g,l.index)),l.length>1&&l.index<a.length&&p.apply(d,l.slice(1)),c=l[0].length,g=r,d.length>=s))break;b.lastIndex===l.index&&b.lastIndex++}return g===a.length?!c&&b.test("")||d.push(""):d.push(a.slice(g)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=o(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,i,n):a.call(String(i),e,n)},function(t,i){var o=n(a,t,this,i,a!==e);if(o.done)return o.value;var u=s(t),h=String(this),p=l(u,RegExp),f=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"y":"g"),w=new p(b?u:"^(?:"+u.source+")",v),x=void 0===i?m:i>>>0;if(0===x)return[];if(0===h.length)return null===d(w,h)?[h]:[];var y=0,C=0,k=[];while(C<h.length){w.lastIndex=b?C:0;var _,T=d(w,b?h:h.slice(C));if(null===T||(_=g(c(w.lastIndex+(b?0:C)),h.length))===y)C=r(h,C,f);else{if(k.push(h.slice(y,C)),k.length===x)return k;for(var E=1;E<=T.length-1;E++)if(k.push(T[E]),k.length===x)return k;C=y=_}}return k.push(h.slice(y)),k}]}),!b)},3454:function(t,e,n){"use strict";n("bbb4")},"3e8f":function(t,e){},4715:function(t,e,n){t.exports=n.p+"static/img/robot1.5223ab17.jpg"},"4d2f":function(t,e,n){t.exports=n.p+"static/img/women.b5740833.jpg"},8486:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-container"},[n("div",{staticClass:"chat-header"},[n("img",{staticStyle:{height:"50%",margin:"10%"},attrs:{src:t.robot1}}),n("el-select",{staticStyle:{"margin-top":"13%",width:"300px"},attrs:{placeholder:"请选择"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.models,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._m(0),n("div",{staticClass:"chat-footer"},[n("div",{staticClass:"input-group"},[n("div",{staticStyle:{width:"20%"}}),n("div",{staticStyle:{display:"flex",width:"55%","border-color":"#d9d9e3","border-width":"1px","border-style":"solid","box-shadow":"0px 0px 5px #d9d9e3(0, 0, 0, 0.5)","border-radius":"5px",margin:"1%"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.chatInput,expression:"chatInput"}],ref:"myTextarea",staticClass:"chat-message-input",attrs:{rows:"2",placeholder:"请输入消息"},domProps:{value:t.chatInput},on:{keydown:t.handleKeyDown,input:function(e){e.target.composing||(t.chatInput=e.target.value)}}}),n("el-button",{staticClass:"send-button",attrs:{type:"success"},on:{click:t.sendMessage}},[t._v("发送"),n("br"),t._v("(ctrl+enter)")])],1),n("el-upload",{staticStyle:{width:"20%",height:"auto"},attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1)])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-content",attrs:{id:"chat-content"}},[n("div",{staticClass:"mb-3",staticStyle:{width:"100%"},attrs:{id:"chatWindow"}})])}],s=(n("ac1f"),n("1276"),n("e9c4"),n("498a"),n("bc3a"),n("3e8f"),{data:function(){return{maxTextareaHeight:150,chatInput:"",chatWindow:null,chat_content:null,userIcon:n("4d2f"),botIcon:n("8e93"),robot1:n("4715"),robotmsg:"",robotdom:null,robotmsgtol:[],websocket:null,models:[{value:"gpt-3.5-turbo",label:"gpt-3.5-turbo"},{value:"gpt-3.5-turbo-16k",label:"gpt-3.5-turbo-16k"},{value:"gpt-4",label:"gpt-4"},{value:"gpt-4-32k",label:"gpt-4-32k"}],model:"gpt-3.5-turbo"}},created:function(){var t=this;console.log("http://106.55.245.162:8085"),this.websocket=new WebSocket("http://106.55.245.162:8085"),this.websocket.onmessage=function(e){t.robotmsg=e.data}},mounted:function(){this.chatWindow=document.getElementById("chatWindow"),this.chat_content=document.getElementById("chat-content"),console.log(this.chatWindow),console.log(this.chat_content),this.$refs.myTextarea.addEventListener("input",this.adjustTextareaHeight)},methods:{handleKeyDown:function(t){t.ctrlKey&&13===t.keyCode&&this.sendMessage()},adjustTextareaHeight:function(){this.$refs.myTextarea.style.height="auto",this.$refs.myTextarea.style.height=Math.min(this.$refs.myTextarea.scrollHeight,this.maxTextareaHeight)+"px"},dealwithstr:function(t){if(-1!==t.indexOf("\n\n")||-1!==t.indexOf("\n")){var e=t.split(/\n\n|\n/);this.robotdom.lastElementChild.textContent+=e[0],this.scrollToBottom();for(var n=1;n<e.length;n++){var a=document.createElement("p");a.setAttribute("style","white-space: pre-wrap;width:80%; word-wrap: break-word;"),a.textContent=e[n],this.robotdom.appendChild(a),this.scrollToBottom()}}else console.log(t),this.robotdom.lastElementChild.textContent+=t,this.scrollToBottom()},addUserMessage:function(t){var e=document.createElement("div");e.className="message-bubble1";var n=document.createElement("img");n.className="chat-icon",n.setAttribute("src",this.userIcon);var a=document.createElement("p");a.setAttribute("style","white-space: pre-wrap; word-wrap: break-word;"),a.innerHTML=t,e.appendChild(n),e.appendChild(a),this.chatWindow.appendChild(e),this.chatInput="",this.scrollToBottom(),this.websocket.send(JSON.stringify({method:"chat",model:this.model,question:t})),this.addBotMessage()},addBotMessage:function(){var t=document.createElement("div");t.className="message-bubble2";var e=document.createElement("img");e.className="chat-icon",e.setAttribute("src",this.botIcon);var n=document.createElement("div"),a=document.createElement("p");a.setAttribute("style","white-space: pre-line;width:80%; word-wrap: break-word;"),a.textContent="",n.appendChild(a),t.appendChild(e),t.appendChild(n),this.chatWindow.appendChild(t),this.robotdom=n,this.scrollToBottom()},sendMessage:function(){var t=this.chatInput.trim();0!==t.length?this.addUserMessage(t):alert("请输入内容！")},scrollToBottom:function(){var t=this;this.$nextTick((function(){t.chatWindow.scrollTop=t.chatWindow.scrollHeight,t.chat_content.scrollTop=t.chat_content.scrollHeight}))}},watch:{robotmsg:function(t,e){this.dealwithstr(t)}}}),o=s,l=(n("3454"),n("2877")),r=Object(l["a"])(o,a,i,!1,null,null,null);e["default"]=r.exports},"8e93":function(t,e,n){t.exports=n.p+"static/img/robot.8aaf7d7b.jpg"},bbb4:function(t,e,n){},e9c4:function(t,e,n){var a=n("23e7"),i=n("d066"),s=n("d039"),o=i("JSON","stringify"),l=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(t,e,n){var a=n.charAt(e-1),i=n.charAt(e+1);return r.test(t)&&!c.test(i)||c.test(t)&&!r.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},u=s((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&a({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,n){var a=o.apply(null,arguments);return"string"==typeof a?a.replace(l,d):a}})}}]);